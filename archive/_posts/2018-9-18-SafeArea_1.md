---
layout:     post
title:      "Swift, Safe Areaì— ëŒ€í•´ì„œ ì•Œì•„ë´…ë‹ˆë‹¤."
subtitle:   "Safe Area in UIView, UICollectionView, UITableView, UIScrollView, UIViewController"
date:       2018-09-18 17:45:00
author:     "MinJun"
header-img: "img/tags/Swift-bg.jpg"
comments: true 
tags: [Swift]
categories: archive
permalink: /archive/:title
---

[iOS Safe Area](https://medium.com/rosberryapps/ios-safe-area-ca10e919526f)ì˜ ê¸€ì„ ì˜ì—­ í–ˆìŠµë‹ˆë‹¤. 

---

## Contents 

- iOS Safe Area
- Agenda 
- Example 
- UIView 
- UIViewController 
	- Simulate iPhone X safe area
- UIScrollView 
	- Contnet Insets Adjustment Behavior 
	- Adjusted Content Insets 
- UITableView 
- UICollectionView 
- Recap 

---

## iOS Safe Area 

[Rosberry](https://rosberry.com/)ì˜ iOS ê°œë°œì Evgeny M.ì´ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.

iOS 7ì—ì„œ ì• í”Œì€ ì–´ë–¤ ë·°ë“¤(ìƒíƒœ ë°”, ë„¤ë¹„ê²Œì´ì…˜ ë°”, íƒ­ ë°” ë“±) ì´ ìŠ¤í¬ë¦° ì˜ì—­ì„ ê°€ë¦¬ì§€ ì•ŠëŠ” UIViewControllerì— ìˆëŠ” ìŠ¤í¬ë¦° í”„ë¡œí¼í‹°ì¸ `topLayoutGuide`, `bottomLayoutGuide`ë¥¼ ì†Œê°œí–ˆìŠµë‹ˆë‹¤. iOS 11ì—ì„œ ì´ ì†ì„±ë“¤ì„ ê¸ˆì§€ ì‹œì³¤ê³  `safe area`ë¥¼ ì†Œê°œí–ˆìŠµë‹ˆë‹¤. Appleì€ safe area ë°–ì— ì»¨íŠ¸ë¡¤ì„ ë°°ì¹˜í•˜ì§€ ë§ê²ƒì„ ê¶Œê³ í•©ë‹ˆë‹¤. ì´ëŸ° ì´ìœ ë¡œ iOS 11ì—ì„œëŠ” ë·°ë¥¼ ë°°ì¹˜ì‹œí‚¬ë•Œ safe area APIë¥¼ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.

iPhonXì˜ í•´ìƒë„(resoultion)ê³¼ safe areaë¥¼ ì§€ì›í•˜ê¸° ì‹œì‘í–ˆì„ë•Œ UIKitì˜ ë§ì€ í´ë˜ìŠ¤ê°€ ìƒˆë¡œìš´ safe area ê¸°ëŠ¥ì„ ê°€ì§€ê³  ìˆìŒì„ ì•Œì•˜ìŠµë‹ˆë‹¤. ì´ ê¸€ì˜ ëª©í‘œëŠ” Safe areaë¥¼ ìš”ì•½í•˜ê³  ì„¤ëª…í•˜ëŠ”ê²ƒì…ë‹ˆë‹¤ 

---

## Agenda 

ì´ ë¸”ë¡œê·¸ì˜ ê¸€ì€ ë‹¤ìŒì˜ ì£¼ì œë¡œ ë¶„ë¦¬ë©ë‹ˆë‹¤.

- UIView
- UIViewController
- UIScrollView
- UITableView
- UIColelctionView 

ìœ„ì˜ í´ë ˆìŠ¤ë“¤ì€ ìƒˆë¡œìš´ safe are propertiesì™€ methodë¥¼ ê°€ì§€ëŠ” ëª¨ë“  í´ë˜ìŠ¤ë“¤ ì…ë‹ˆë‹¤

---

## Example 

ì´ ê¸€ì„ ì½ëŠ” ë™ì•ˆ [GitHub repository](https://github.com/rosberry/SafeAreaExample)ì— ìˆëŠ” ì˜ˆì œë¥¼ í•¨ê»˜ í• ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## UIView 

iOS11ì—ì„œ UIViewControllerì˜ `topLayoutGuide`, `bottomLayoutGuide`ëŠ” ë‹¤ìŒì˜ ìƒˆë¡œìš´ UIViewì˜ safe area ì†ì„±ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. 

```swift
@available(iOS 11.0, *)
open var safeAreaInsets: UIEdgeInsets { get }

@available(iOS 11.0, *)
open var safeAreaLayoutGuide: UILayoutGuide { get }
```

`safeAreaInsets` ì†ì„±ì€ í™”ë©´ì˜ ìƒ, í•˜ë‹¨ ë¿ë§Œ ì•„ë‹ˆë¼ ëª¨ë“  ë©´ì—ì„œ í™”ë©´ì„ ê°€ë¦´ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. iPhone Xê°€ ìƒˆë¡œ ë‚˜íƒ€ë‚¬ì„ë•Œ ì™œ ì™¼ìª½ê³¼ ì˜¤ë¥¸ìª½ ì¸ì…‹ì´ í•„ìš”í•œì§€ ëª…í™•í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. 

> Landscape orientation ë•Œë¬¸ì—..

<center><img src="/img/posts/SafeArea_0.png" width="500"></center> <br>

<center><img src="/img/posts/SafeArea_1.png" width="500"></center> <br>

iPhone XëŠ” ì„¸ë¡œ ë°©í–¥(portrait orientation)ì—ì„œ ìƒ, í•˜ safe area insetsë¥¼ ê°€ì§‘ë‹ˆë‹¤. ê°€ë¡œ ë°©í–¥(landscape orientation) ì—ì„œëŠ” ì™¼ìª½, ì˜¤ë¥¸ìª½ safe area insertsë¥¼ ê°€ì§‘ë‹ˆë‹¤. 

...

ë‹¤ìŒ ì˜ˆì œë¥¼ ë´…ë‹ˆë‹¤. í…ìŠ¤íŠ¸ ë ˆì´ë¸”ê³¼ ê³ ì •ëœ ë†’ì´ë¥¼ ê°€ì§„ ë‘ê°œì˜ ì‚¬ìš©ì í•˜ìœ„ë·°ëŠ” ë·° ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë·°ì— ìƒë‹¨ê³¼ í•˜ë‹¨ì— ì¶”ê°€ë˜ê³ , ë·°ì˜ ê°€ì¥ìë¦¬ì— ìœ„ì¹˜ë©ë‹ˆë‹¤.

<center><img src="/img/posts/SafeArea_2.png" width="500"></center> <br>

í•˜ìœ„ë·°ë“¤ì˜ ë‚´ìš©ì€ ìƒë‹¨ì˜ ë…¸ì¹˜(notch)ì™€ í•˜ë‹¨ì˜ í™ˆë²„íŠ¼ê³¼ ê²¹ì¹˜ëŠ”(overlapped)ê±¸ ë³¼ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ìœ„ë·°ë¥¼ ì˜¬ë°”ë¥´ê²Œ ë°°ì¹˜í•˜ë ¤ë©´ ìˆ˜ë™ ë ˆì´ì•„ì›ƒì„ ì‚¬ìš©í•˜ì—¬ safe areaì— ìœ„ì¹˜ì‹œí‚¬ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
topSubview.frame.origin.x = view.safeAreaInsets.left
topSubview.frame.origin.y = view.safeAreaInsets.top
topSubview.frame.size.width = view.bounds.width - view.safeAreaInsets.left - view.safeAreaInsets.right
topSubview.frame.size.height = 300
```

ë˜ëŠ”

```swift
bottomSubview.leftAnchor.constraint(equalTo: view.safeAreaLayoutGuide.leftAnchor).isActive = true
bottomSubview.rightAnchor.constraint(equalTo: view.safeAreaLayoutGuide.rightAnchor).isActive = true
bottomSubview.bottomAnchor.constraint(equalTo: view.safeAreaLayoutGuide.bottomAnchor).isActive = true
bottomSubview.heightAnchor.constraint(equalToConstant: 300).isActive = true
```

<center><img src="/img/posts/SafeArea_3.png" width="500"></center> <br>

ë” ë³´ê¸° ì¢‹ìŠµë‹ˆë‹¤. ë¿ë§Œ ì•„ë‹ˆë¼. í•˜ìœ„ ë·°ì˜ í•˜ìœ„ í´ë˜ìŠ¤ì— ì§ì ‘ safe areaë¥¼ í•˜ìœ„ë·° ë‚´ìš©ì— ì¶”ê°€í• ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

```swift
label.frame = safeAreaLayoutGuide.layoutFrame
```

ë˜ëŠ”

```swift
label.topAnchor.constraint(equalTo: safeAreaLayoutGuide.topAnchor).isActive = true
label.bottomAnchor.constraint(equalTo: safeAreaLayoutGuide.bottomAnchor).isActive = true
label.leftAnchor.constraint(equalTo: safeAreaLayoutGuide.leftAnchor).isActive = true
label.rightAnchor.constraint(equalTo: safeAreaLayoutGuide.rightAnchor).isActive = true
```

<center><img src="/img/posts/SafeArea_4.png" width="500"></center> <br>

ì´ì œ ë·° ì»¨íŠ¸ë¡¤ëŸ¬ ë¿ë§Œ ì•„ë‹ˆë¼ í•˜ìœ„ ë·° ê³„ì¸µ ì–´ëŠê³³ì—ì„œë‚˜ safe areaë¥¼ ë·°ì— ì¶”ê°€í• ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## UIViewController 

iOS 11ì—ì„œ UIViewControllerëŠ” ìƒˆë¡œìš´ ì†ì„±ì„ ê°€ì§‘ë‹ˆë‹¤.

```swift
@available(iOS 11.0, *)
open var additionalSafeAreaInsets: UIEdgeInsets
```

ë·° ì»¨íŠ¸ë¡¤ëŸ¬ì˜ í•˜ìœ„ë·°ê°€ ìì‹ ë·° ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë·°ë“¤ì„ ê°€ì§€ê³  ìˆì„ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤. ì˜ˆë¥¼ë“¤ì–´ ì• í”Œì€ UINavigationControllerì™€ UITabBarControllerì—ì„œ barê°€ ë°˜íˆ¬ëª…(translucent)ì¼ë•Œ `additional safe area insert`ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

<center><img src="/img/posts/SafeArea_5.png" width="500"></center> <br>

ì˜ ì‘ë™í•˜ì§€ë§Œ ìƒíƒœë°”ë¥¼ ìˆ¨ê²¼ì„ë•Œ ì´ìƒì¼ì´ ë°œìƒí•©ë‹ˆë‹¤. 

<center><img src="/img/posts/SafeArea_6.png" width="500"></center> <br>

ëª¨ë“  safe area insertëŠ” ì•Œë§ê²Œ ì—°ì‚°ë˜ì§€ë§Œ ë„¤ë¹„ê²Œì´ì…˜ ë°”ëŠ” ë…¸ì¹˜ë°” ì•„ë˜ì˜ ë§¨ìœ„ë¡œ ì´ë™í•©ë‹ˆë‹¤. [ìŠ¬í”ˆ ë²„ê·¸](https://stackoverflow.com/questions/46487808/iphone-x-hidden-status-bar-pushes-navigation-bar-upwards)ì´ë©° ì¼ë¶€ í•´ê²° ë°©ë²•ì„ ì œì™¸í•˜ê³ ëŠ” í˜„ì¬ í•´ê²°í•  ë°©ë²•ì´ ì—†ë‹¤ëŠ” ê²ƒì„ ì•Œê³ ìˆìŠµë‹ˆë‹¤. 

`additional safe area inserts` ë˜ëŠ” `safe area insert`ì´ ì‹œìŠ¤í…œì— ì˜í•´ì„œ ë³€ê²½ë ë•Œ UIViewì™€ UIViewControllerì˜ ì ì ˆí•œ ë©”ì†Œë“œê°€ í˜¸ì¶œë©ë‹ˆë‹¤.

```swift
// UIView
@available(iOS 11.0, *)
open func safeAreaInsetsDidChange()

//UIViewController
@available(iOS 11.0, *)
open func viewSafeAreaInsetsDidChange()
```

### Simulate iPhone X safe area

`Additional safe area inserts`ëŠ” ì•±ì´ iPhone Xë¥¼ ì§€ì›í•˜ëŠ” ë°©ì‹ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ”ë° ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì‹œë®¬ë ˆì´í„°ì—ì„œ ì•±ì„ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ì—†ê³ , iPhoneXê°€ ì—†ëŠ”ê²½ìš°ğŸ˜­ ìœ ìš©í•©ë‹ˆë‹¤. 

```swift
//portrait orientation, status bar is shown
additionalSafeAreaInsets.top = 24.0
additionalSafeAreaInsets.bottom = 34.0

//portrait orientation, status bar is hidden
additionalSafeAreaInsets.top = 44.0
additionalSafeAreaInsets.bottom = 34.0

//landscape orientation
additionalSafeAreaInsets.left = 44.0
additionalSafeAreaInsets.bottom = 21.0
additionalSafeAreaInsets.right = 44.0
```

<center><img src="/img/posts/SafeArea_7.png" width="500"></center> <br>

---

## UIScrollView 

í…ìŠ¤íŠ¸ ë ˆì´ë¸”ì´ ìˆëŠ” ìŠ¤í¬ë¡¤ë·°ë¥¼ ë·°ì»¨íŠ¸ë¡¤ëŸ¬ì— ì¶”ê°€í•˜ê³  ë·°ì˜ ê°€ì¥ìë¦¬ì— ìœ„ì¹˜ì‹œí‚µë‹ˆë‹¤.

<center><img src="/img/posts/SafeArea_8.gif" width="500"></center> <br>

ë³´ëŠ”ê²ƒê³¼ ê°™ì´ ìŠ¤í¬ë¡¤ë·° insetsëŠ” top ê³¼ bottomì—ì„œ ìë™ìœ¼ë¡œ ì¡°ì •ë©ë‹ˆë‹¤. iOS 7ê³¼ iOS 11ì´í•˜ê¹Œì§€ëŠ” UIViewControllerì˜ `automaticallyAdjustsScrollViewInsets`ì†ì„±ì„ ì‚¬ìš©í•˜ì—¬ ìŠ¤í¬ë¡¤ë·°ì˜ ì»¨í…ì¸  insets ì¡°ì • ë™ì‘ì„ ê´€ë¦¬ í–ˆì§€ë§Œ iOS 11ì—ì„œ ë”ì´ìƒ ì‚¬ìš©í•˜ì§€ ì•Šê³ (deprecated) UIScrollViewì˜ `contentInsetAdjustmentBehavior`ì†ì„±ìœ¼ë¡œ ëŒ€ì²´ ë˜ì—ˆìŠµë‹ˆë‹¤. 

> ì‚¬ì‹¤ ì´ë…€ì„ì˜ ë™ì‘ ë°©ì‹ ë–„ë¬¸ì— safe areaì— ëŒ€í•´ì„œ ì°¾ì•„ë³´ì•˜ìŠµë‹ˆë‹¤.

## Contnet Insets Adjustment Behavior 

`never`: scroll view content insetsëŠ” ì ˆëŒ€ ì¡°ì •ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê°„ë‹¨í•©ë‹ˆë‹¤

<center><img src="/img/posts/SafeArea_9.gif" width="500"></center> <br>

`scrollableAxex`: ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ ì¶•(scrollable axes)ë¥¼ ìœ„í•´ ì»¨í…ì¸  ì¸ì…‹ì´ ì¡°ì •ë©ë‹ˆë‹¤. ì˜ˆë¥¼ë“¤ì–´, vertical axisëŠ” ìŠ¤í¬ë¡¤ë·° ì»¨í…ì¸  ì‚¬ì´ì¦ˆê°€ ìŠ¤í¬ë¡¤ë·° í”„ë ˆì„ ì‚¬ì´ì¦ˆ ë†’ì´ ë³´ë‹¤ í¬ê±°ë‚˜ `alwayBoundceVertical` ì†ì„±ì´ ì‚¬ìš©ê°€ëŠ¥í• ë•Œ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë¹„ìŠ·í•˜ê²Œ `horizontal axis`ëŠ” ì»¨í…ì¸  ë„“ì´ê°€ í”„ë ˆì„ ë„“ì´ë³´ë‹¤ í¬ê±°ë‚˜ `alwaysBounceHorizontal` ì†ì„±ì´ ì‚¬ìš©ê°€ëŠ¥í• ë•Œ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•©ë‹ˆë‹¤.

<center><img src="/img/posts/SafeArea_10.gif" width="500"></center> <br>

`always`: ìŠ¤í¬ë¡¤ ê°€ëŠ¥í• ë•Œì™€ ê·¸ë ‡ì§€ ì•Šì„ë•Œë¥¼ ìœ„í•´ ìŠ¤í¬ë¡¤ë·° content insertsì´ ì¡°ì •ë©ë‹ˆë‹¤. 

<center><img src="/img/posts/SafeArea_11.gif" width="500"></center> <br>

`automaic`: ê¸°ë³¸ê°’ ì…ë‹ˆë‹¤. ë‹¤ìŒ ì¡°ê±´ì´ trueì¼ë•Œ `always`ì™€ ë™ì¼í•©ë‹ˆë‹¤. 

- ìŠ¤í¬ë¡¤ë·°ì˜ horizontal axisê°€ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•˜ê³ , vertical axisëŠ” ìŠ¤í¬ë¡¤ ë¶ˆê°€ëŠ¥í• ë•Œ
- scrollviewê°€ ë·° ì»¨íŠ¸ë¡¤ëŸ¬ ë·°ì˜ ì²«ë²ˆì§¸ í•˜ìœ„ ë·°ì¼ë•Œ 
- ë·° ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë„¤ë¹„ê²Œì´ì…˜ ë˜ëŠ” íƒ­ë°” ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ìì‹ì¼ë•Œ 
- `automaticallyAdjustScrollViewInsets`ì´ ê°€ëŠ¥í• ë•Œ 

ë‹¤ë¥¸ ëª¨ë“  ê²½ìš° automaticì€ scrollableAxesì™€ ë™ì¼í•©ë‹ˆë‹¤. 

`automatic behavior`ì— ëŒ€í•œ ì¶”ê°€ ì„¤ëª…ì€ UIScrollView classì—ì„œ ì•Œìˆ˜ ìˆìŠµë‹ˆë‹¤.


> `.scrollableAxes`ì™€ ë¹„ìŠ·í•˜ì§€ë§Œ ì´ì „ ë²„ì „ê³¼ í˜¸í™˜ì„±ì„ ìœ„í•´ ìŠ¤í¬ë¡¤ë·°ê°€ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œì§€ ì—¬ë¶€ì— ê´€ê³„ì—†ì´ ë„¤ë¹„ê²Œì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ ë‚´ë¶€ì—ì„œ `automaticallyAdjustsScrollViewInsets = YES`ì¸ ë·° ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ìŠ¤í¬ë¡¤ë·°ë¥¼ ì†Œìœ í• ë•Œ ìœ„, ì•„ë˜ contentInsetì„ ì¡°ì •í•©ë‹ˆë‹¤

ì• í”Œ ë¬¸ì„œëŠ” ì¡°ê¸ˆ ë‹¤ë¥¸ ì„¤ëª…ì„ ê°€ì§‘ë‹ˆë‹¤. 

> ìŠ¤í¬ë¡¤ë·°ê°€ íƒ­ë°” ì»¨íŠ¸ë¡¤ëŸ¬ ë˜ëŠ” ë„¤ë¹„ ê²Œì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì»¨í…ì¸  ë·° ì¼ë•Œ ì½˜í…ì¸ ëŠ” í•­ìƒ ìˆ˜ì§ìœ¼ë¡œ ì¡°ì •ë©ë‹ˆë‹¤. ìŠ¤í¬ë¡¤ë·°ê°€ ìˆ˜í‰ìœ¼ë¡œ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ ê²½ìš°, ìˆ˜í‰ ì»¨í…ì¸  ì˜¤í”„ì…‹(offset)ì€ 0ì´ ì•„ë‹Œ safe area insetsì¼ë•Œ ë˜í•œ ì¡°ì •ë©ë‹ˆë‹¤.

ì´ë ‡ê²Œí•´ì„œ `automatic behavior`ëŠ” ê¸°ë³¸(default) ì…ë‹ˆë‹¤. ì™œëƒí•˜ë©´ ì´ì „ ë²„ì „ê³¼ í˜¸í™˜ì„± ë•Œë¬¸ì…ë‹ˆë‹¤. iOS 10, 11ì—ì„œëŠ” ìˆ˜í‰ìœ¼ë¡œ ìŠ¤í¬ë¡¤ê°€ëŠ¥í•œ ìŠ¤í¬ë¡¤ë·°ëŠ” ìƒ, í•˜ ê°™ì€ `insets`ë¥¼ ê°€ì§‘ë‹ˆë‹¤.

## Adjusted Content Insets 

iOS 11ì—ì„œ UIScrollViewëŠ” `adjustedContentInset`ë¼ëŠ” ìƒˆë¡œìš´ ì†ì„±ì„ ê°€ì§‘ë‹ˆë‹¤. 

```swift
@available(iOS 11.0, *)
open var adjustedContentInset: UIEdgeInsets { get }
```

`contentInset`, `adjustedContentInset` ì´ ë‘˜ì€ ë¬´ì—‡ì´ ë‹¤ë¥¸ê°€ìš”? ìœ„ì—ì„œëŠ” ë„¤ë¹„ê²Œì´ì…˜ ë°”, ì•„ë˜ì—ì„œëŠ” íƒ­ ë°”ì— ì˜í•´ì„œ ìŠ¤í¬ë¡¤ë·°ê°€ ë®ì–´ì¡Œì„ë•Œ ë‘ ê°’ì„ ì¶œë ¥í•´ ë³´ê² ìŠµë‹ˆë‹¤.

> `adjustedContentInset = contentInset + system inset` ë” ìì„¸í•œ ë‚´ìš©ì€ [<U>https://developer.apple.com/videos/play/wwdc2018/235/</U>](https://developer.apple.com/videos/play/wwdc2018/235/)ë¥¼ ì°¸ì¡°í•´ì£¼ì„¸ìš”.
> 


```swift
//iOS 10
//contentInset = UIEdgeInsets(top: 64.0, left: 0.0, bottom: 49.0, right: 0.0)

//iOS 11
//contentInset = UIEdgeInsets(top: 0.0, left: 0.0, bottom: 0.0, right: 0.0)
//adjustedContentInset = UIEdgeInsets(top: 64.0, left: 0.0, bottom: 49.0, right: 0.0)
```

ì´ì œ ëª¨ë“ ê³³ì— contentInsetì— 10ì„ ì¶”ê°€í•˜ê³  ë‘ ê°’ì„ ë‹¤ì‹œ ì¶œë ¥í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```swift
//iOS 10
//contentInset = UIEdgeInsets(top: 74.0, left: 10.0, bottom: 59.0, right: 10.0)

//iOS 11
//contentInset = UIEdgeInsets(top: 10.0, left: 10.0, bottom: 10.0, right: 10.0)
//adjustedContentInset = UIEdgeInsets(top: 74.0, left: 10.0, bottom: 59.0, right: 10.0)
```

iOS 11ì—ì„œ ì‹¤ì œ scroll view content insetsì€ `adjustedContentInset` ì†ì„±ìœ¼ë¡œ ë¶€í„° ì•Œìˆ˜(read) ìˆì§€ë§Œ, contentInset ì†ì„±ì—ì„œëŠ” ì•Œìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì¦‰, ì• í”Œë¦¬ì¼€ì´ì…˜ì´ iOS 10ê³¼ iOS 11ì„ ëª¨ë‘ ì§€ì›í• ë•Œ content insetsì¡°ì •ì„ ìœ„í•œ ë‹¤ë¥¸ ë¡œì§ì„ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤. 

`contentInset`ì„ ë³€ê²½í•˜ê±°ë‚˜ content insetsê°€ ì‹œìŠ¤í…œì— ì˜í•´ ì¡°ì •ë˜ë©´ UIScrollView ë° UIScrollView Delegateì˜ ì ì ˆí•œ ë©”ì†Œë“œê°€ í˜¸ì¶œ ë©ë‹ˆë‹¤. 

```swift
//UIScrollView
@available(iOS 11.0, *)
open func adjustedContentInsetDidChange()

//UIScrollViewDelegate
@available(iOS 11.0, *)
optional public func scrollViewDidChangeAdjustedContentInset(_ scrollView: UIScrollView)
```

---

## UITableView 

ì‚¬ìš©ì ì •ì˜ í•´ë”ì™€ ì…€ì„ ê°€ì§„ í…Œì´ë¸”ë·°ë¥¼ ë·° ì»¨íŠ¸ë¡¤ëŸ¬ì— ì¶”ê°€í•˜ê³  ë·°ì˜ ê°€ì¥ìë¦¬ì— ìœ„ì¹˜ì‹œí‚µë‹ˆë‹¤.

<center><img src="/img/posts/SafeArea_12.png" width="500"></center> <br>


> ë·°ì˜ ê°€ì¥ìë¦¬ì— í…Œì´ë¸”ë·°ë¥¼ ìœ„ì¹˜í•©ë‹ˆë‹¤(insetContentViewsToSafeARea == true). í•´ë”ì™€ ì…€ì€ íˆ¬ëª…(transparent)ì…ë‹ˆë‹¤. ì…€ì˜ ì»¨í…ì¸  ë·°ëŠ” í° ë°°ê²½ìƒ‰ ì…ë‹ˆë‹¤ í•´ë”ì˜ ì½˜í…ì¸ ë·°ëŠ” ë¹¨ê°• ë°°ê²½ìƒ‰ ì…ë‹ˆë‹¤.

í•´ë”ë·°ì™€ ì…€ì˜ ì½˜í…ì¸  í”„ë ˆì„ì´ ê°€ë¡œë°©í–¥ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŒì„ ì•Œìˆ˜ ìˆìŠµë‹ˆë‹¤. ë™ì‹œì— ì…€ê³¼ êµ¬ë¶„ì„  í”„ë ˆì„ì€ ë³€ê²½ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì´ê²ƒì´ ìƒˆë¡œìš´ UITableViewì˜ `insetsContentViewsToSafeArea` ì†ì„±ìœ¼ë¡œ ê´€ë¦¬í• ìˆ˜ ìˆëŠ” ê¸°ë³¸ ë™ì‘ì…ë‹ˆë‹¤.

```swift
@available(iOS 11.0, *)
open var insetsContentViewsToSafeArea: Bool
```

ì½˜í…ì¸  ë·° insetsì˜ íš¨ê³¼ë¥¼ ì—†ê²Œ í•˜ë ¤ë©´ `insetsContentViewToSafeArea == false`

<center><img src="/img/posts/SafeArea_13.png" width="500"></center> <br>

> insetsContentViewToSafeArea == false 

ì´ì œ header/footer/cell content views í”„ë ˆì„ì€ ê° header/footer/cell í”„ë ˆì„ê³¼ ê°™ë‹¤ëŠ”ê±¸ ì•Œìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## UICollectionView 

UICollectionViewì—ì„œ ê°™ì€ ì•„ì´í…œë“¤ ëª©ë¡ì„ ìƒì„±í•˜ì—¬ ì‹œë„í•´ë´…ë‹ˆë‹¤.

<center><img src="/img/posts/SafeArea_14.png" width="500"></center> <br>

> CollectionViewë¥¼ ë·°ì˜ ê°€ì¥ìë¦¬ì— ìœ„ì¹˜í•©ë‹ˆë‹¤. ì…€ì€ íˆ¬ëª…(transparent)í•˜ì§€ë§Œ ì…€ì˜ ì½˜í…ì¸  ë·°ëŠ” í°ë°°ê²½ìƒ‰ì…ë‹ˆë‹¤. í•´ë”ëŠ” ë¹¨ê°• ë°°ê²½ìƒ‰ì…ë‹ˆë‹¤. 

collection viewëŠ” UICollectionViewFlowLayoutì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ìŠ¤í¬ë¡¤ë·° ë°©í–¥ì€ ìˆ˜ì§ ì…ë‹ˆë‹¤. í•´ë”ëŠ” `UICollectionReusableView` ë¼ëŠ” í—¤ë”ë¡œ contentViewê°€ ì—†ê³  ìì²´ì ì¸ ë¹¨ê°• ë°°ê²½ìƒ‰ì…ë‹ˆë‹¤. 

ì´ë¯¸ì§€ì—ì„œ header/footer/cell ì— `inset`ì„ ì¶”ê°€í•˜ì§€ ì•Šì•˜ë‹¤ëŠ”ê±¸ ì•Œìˆ˜ ìˆìŠµë‹ˆë‹¤. ì»¨í…ì¸ ë¥¼ ì˜¬ë°”ë¥´ê²Œ ë ˆì´ì•„ì›ƒí•˜ëŠ” ìœ ì¼í•œ ë°©ë²•ì€ header/footer/cell í•˜ìœ„ë·°ë¥¼ header/footer/cell safe areaë¡œ ë¶™ì´ëŠ” ê²ƒì…ë‹ˆë‹¤.

<center><img src="/img/posts/SafeArea_15.png" width="500"></center> <br>

ì´ì œ Collection viewì˜ ì…€ ì‚¬ì´ì¦ˆë¥¼ ë³€ê²½í•˜ê³  ê²©ìë¡œ ë§Œë“­ë‹ˆë‹¤.

<center><img src="/img/posts/SafeArea_16.png" width="500"></center> <br>

> ì»¬ë ‰ì…˜ë·°ë¥¼ ê°€ì¥ìë¦¬ì— ìœ„ì¹˜í•©ë‹ˆë‹¤ (sectionSetReference ==.fromContentInset). UICollectionViewFlowLayout ì´ ì‚¬ìš©ë˜ì—ˆê³  ìˆ˜ì§ ìœ¼ë¡œ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•©ë‹ˆë‹¤. 

ê°€ë¡œë°©í–¥ì—ì„œ ì…€ë“¤ì´ ë…¸ì¹˜ì— ë®ì—¬ì§€ëŠ”ê±¸ ë³¼ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì„ ê³ ì¹˜ë ¤ë©´ section content insetsì— safe area insetsì„ ì¶”ê°€í• ìˆ˜ ìˆì§€ë§Œ iOS 11 ì—ì„œUIColelctionViewFlowLayoutëŠ” ë‹¤ìŒê³¼ê°™ì€ ìƒˆë¡œìš´ `sectionInsetReference`ì†ì„±ì„ ê°€ì§‘ë‹ˆë‹¤. 

```swift
@available(iOS 11.0, *)
public enum UICollectionViewFlowLayoutSectionInsetReference : Int {    
    case fromContentInset        //default value
    case fromSafeArea
    case fromLayoutMargins
}

@available(iOS 11.0, *)
open var sectionInsetReference: UICollectionViewFlowLayoutSectionInsetReference
```

ì›í•˜ëŠ” ê²°ê³¼ë¥¼ ì–»ìœ¼ë ¤ë©´ `fromSafeArea`ë¥¼ ê°’ìœ¼ë¡œ ì„¤ì •í•˜ë©´ ë©ë‹ˆë‹¤. ì´ ê²½ìš° ì‹¤ì œ ìƒ‰ì…˜ ì»¨í…ì¸  ì¸ì…‹ì€ `section content insets + safe area insets`ì…ë‹ˆë‹¤.

<center><img src="/img/posts/SafeArea_17.png" width="500"></center> <br>

> sectionInsetReference ==.fromSafeArea

ë¹„ìŠ·í•˜ê²Œ `fromLayoutMargins`ê°’ì´ ì‚¬ìš©ë˜ì—ˆì„ë•Œ collection view layout marginsì´ section content insetsìœ¼ë¡œ ì¶”ê°€ë˜ì–´ì§‘ë‹ˆë‹¤.

<center><img src="/img/posts/SafeArea_18.png" width="500"></center> <br>

> sectionInsetReference == .fromLayoutMargins

---

## Recap 

iOS 11ì—ì„œ ì—í”Œì´ ì¶”ê°€í•œ ìœ ìš©í•œ ë„êµ¬ì¸ safe areaë¥¼ ë‹¤ë£¨ì–´ ë´¤ìŠµë‹ˆë‹¤. í•´ë‹¹ ë‚´ìš©ë“¤ì„ ìš”ì•½í•˜ê³  ì„¤ëª…í•˜ë ¤ê³  ë…¸ë ¥í–ˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì°¸ì¡°ë“¤ì„ í†µí•´ì„œ ì¶”ê°€ì ì¸ ì •ë³´ë¥¼ ì–»ëŠ”ê²ƒë„ ì¢‹ìŠµë‹ˆë‹¤.

[Updating Your App for iOS 11](https://developer.apple.com/videos/play/wwdc2017/204/)<br>
[What's New in Cocoa Touch](https://developer.apple.com/videos/play/wwdc2017/201/)<br>
[Building Apps for iPhone X](https://developer.apple.com/videos/play/tech-talks/201/)<br>
[Positioning Content Relative to the Safe Area](https://developer.apple.com/documentation/uikit/uiview/positioning_content_relative_to_the_safe_area)<br>
[Designing for iPhone X](https://developer.apple.com/videos/play/tech-talks/801/)<br>

---
